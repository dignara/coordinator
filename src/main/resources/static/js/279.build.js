"use strict";(self.webpackChunkcoordinator=self.webpackChunkcoordinator||[]).push([[279],{6279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var r=n(6540),a=n(3954),c=n(1765),l=n(4366),o=n(552),s=n(7005),i=n(5135),u=n(2376);const m=function(){var e=(0,i.wA)(),t=(0,i.d4)(u.qc);return r.createElement("header",null,r.createElement("section",null,r.createElement("div",{className:"d-flex"},r.createElement("div",{className:"flex-grow-1"},r.createElement("img",{src:"https://image.msscdn.net/display/images/2024/07/19/3a7caf3364184181a3cae5741f91464f.png",alt:"musinsaLogo"})),t&&r.createElement("a",{className:"me-2",onClick:function(){return e((0,s.J7)())}},r.createElement("i",{className:"bi bi-bag-plus"})),r.createElement("a",{className:"me-2",onClick:function(){return e((0,s.YE)())}},r.createElement("i",{className:"bi ".concat(t?"bi-person-gear":"bi-person")})))))};var d=n(7255),g=n(5491),p=n(7407),b=n(8420);const f=b.J1`
    fragment goods on Goods {
        id
        brand
        category
        price 
    }
`,E=b.J1`
    query GetLowPriceGoodsByCategory {
        lowPriceGoodsByCategory {
            totalPrice
            goods {
                ...goods   
            }
        }   
    }
    ${f}
`,v=b.J1`
    query GetLowPriceBrandGoods {
        lowPriceBrandGoods {
            totalPrice
            brand
            goods {
                ...goods
            }
        }
    }
    ${f}
`,y=b.J1`
    query GetCategoryHighAndLowPriceGoods($category: String!) {
        categoryHighAndLowPriceGoods(category: $category) {
            category
            highPriceGoods {
                ...goods
            }
            lowPriceGoods {
                ...goods
            }
        }
    }
    ${f}
`,h=b.J1`
    mutation SaveGoods($goodsInput: GoodsInput!) {
        saveGoods(goodsInput: $goodsInput) {
            ...goods
        }
    }
    ${f}
`,N=b.J1`
    mutation DeleteGoods($id: ID!) {
        deleteGoods(id: $id) {
            ...goods
        }
    }
    ${f}
`;var w=function(e,t){return r.createElement("div",{className:"text-center mt-5"},r.createElement("div",{className:"spinner-border mb-3"},r.createElement("span",{className:"visually-hidden"},"Loading...")),r.createElement("h3",{className:"text-uppercase text-danger mt-3"},e),r.createElement("p",{className:"text-muted mt-3"},t))},O=function(e,t){return r.createElement("div",{className:"text-center mt-5"},r.createElement("i",{className:"fs-1 bi bi-window-x"}),r.createElement("h3",{className:"text-uppercase text-danger mt-3"},e),r.createElement("p",{className:"text-muted mt-3"},t))},P=function(e){var t=e.loading,n=e.error,a=e.result,c=(0,i.wA)();return t?w("로딩중...","잠시만 기다려주세요."):n?O("로딩실패",n.message):r.createElement("ul",{className:"list-group"},null==a?void 0:a.goods.map((function(e){return r.createElement("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:function(){return c((0,s.J7)({goods:e}))}},r.createElement("div",{className:"brand"},r.createElement("i",{className:"bi bi-bag-fill fs-3"}),r.createElement("span",{className:"brand-name"},e.brand),r.createElement("span",{className:"ms-3"},e.category)),r.createElement("span",null,e.price.toLocaleString()))})))};const A=function(){var e=(0,p.IT)(E),t=e.loading,n=e.error,a=e.data,c=null==a?void 0:a.lowPriceGoodsByCategory;return r.createElement("section",null,r.createElement("header",{className:"d-flex"},r.createElement("h3",null,"카테고리 별 최저가격 브랜드"),r.createElement("h5",{className:"ms-auto me-3"},!!c&&c.totalPrice.toLocaleString())),r.createElement("div",null,r.createElement(P,{error:n,loading:t,result:c})))};var j=function(e){var t=e.loading,n=e.error,a=e.result,c=(0,i.wA)();return t?w("로딩중...","잠시만 기다려주세요."):n?O("로딩실패",n.message):r.createElement("ul",{className:"list-group"},null==a?void 0:a.goods.map((function(e){return r.createElement("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:function(){return c((0,s.J7)({goods:e}))}},r.createElement("div",{className:"brand"},r.createElement("i",{className:"bi bi-bag-fill fs-3"}),r.createElement("span",{className:"ms-3"},e.category)),r.createElement("span",null,e.price.toLocaleString()))})))};const k=function(){var e=(0,p.IT)(v),t=e.loading,n=e.error,a=e.data,c=null==a?void 0:a.lowPriceBrandGoods;return r.createElement("section",null,r.createElement("header",{className:"d-flex"},r.createElement("h3",null,"최저가격 ",!!c&&"'".concat(c.brand,"'")," 브랜드 상품"),r.createElement("h5",{className:"ms-auto me-3"},!!c&&c.totalPrice.toLocaleString())),r.createElement("div",null,r.createElement(j,{error:n,loading:t,result:c})))};var C=n(5966),G=n(5190),x=["상의","아우터","바지","스니커즈","가방","모자","양말","액세서리"],S=n(7136);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,S.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=(0,r.createContext)({}),J=function(e){var t=e.children,n=(0,r.useState)({category:void 0}),a=(0,d.A)(n,2),c=a[0],l=a[1],o=(0,r.useMemo)((function(){return{setCategory:function(e){l(D(D({},c),{},{category:e}))}}}),[c]),s=(0,r.useMemo)((function(){return[c,o]}),[c,o]);return r.createElement(L.Provider,{value:s},t)},$=function(e){var t=e.title,n=e.category,a=e.goods,c=(0,i.wA)();return r.createElement("section",null,r.createElement("header",null,r.createElement("h3",null,t," ",!!n&&"'".concat(n,"'")," 상품")),r.createElement("div",null,r.createElement("ul",{className:"list-group"},a.map((function(e){return r.createElement("a",{className:"list-group-item list-group-item-action d-flex justify-content-between align-items-center",onClick:function(){return c((0,s.J7)({goods:e}))}},r.createElement("div",{className:"brand"},r.createElement("i",{className:"bi bi-bag-fill fs-3"}),r.createElement("span",{className:"brand-name"},e.brand)),r.createElement("span",null,e.price.toLocaleString()))})))))};const B=function(){var e=(0,r.useContext)(L),t=(0,d.A)(e,2),n=t[0].category,a=t[1],c=(0,C._)(y),l=(0,d.A)(c,2),o=l[0],s=l[1],i=s.called,u=s.loading,m=s.error,g=s.data,p=null==g?void 0:g.categoryHighAndLowPriceGoods;r.useEffect((function(){n&&b(n)}),[n]);var b=function(e){o({variables:{category:e}}).then((function(e){var t;a.setCategory(null==e||null===(t=e.data)||void 0===t||null===(t=t.categoryHighAndLowPriceGoods)||void 0===t?void 0:t.category)}))};return r.createElement(r.Fragment,null,r.createElement("section",null,r.createElement(G.Ay,{value:n?{value:n,label:n}:void 0,isDisabled:i&&u,placeholder:"카테고리를 선택하세요.",onChange:function(e){return b(e.value)},options:x.map((function(e){return{value:e,label:e}}))})),i&&u?w("로딩중...","잠시만 기다려주세요."):m?O("로딩실패",m.message):p&&r.createElement(r.Fragment,null,r.createElement($,{title:"최저가",category:p.category,goods:p.lowPriceGoods}),r.createElement($,{title:"최고가",category:p.category,goods:p.highPriceGoods})))};var H=[{title:"구현1",component:r.createElement(A,null)},{title:"구현2",component:r.createElement(k,null)},{title:"구현3",component:r.createElement(B,null)}];const I=function(){var e=(0,r.useState)(0),t=(0,d.A)(e,2),n=t[0],a=t[1],c=[],l=[];return H.forEach((function(e,t){c.push(r.createElement(g.oz,null,r.createElement("a",{className:"".concat(n===t?"active":"")},r.createElement("span",null,e.title)))),l.push(r.createElement(g.Kp,null,e.component))})),r.createElement(g.tU,{onSelect:function(e){return a(e)}},r.createElement(g.wb,{className:"react-tabs__tab-list d-flex justify-content-start ps-2"},c),r.createElement("article",null,l))};var R=n(7635),F=n(1933);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,S.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const z=function(e){var t=e.goods,n=(0,r.useContext)(L),a=(0,d.A)(n,1)[0].category,c=(0,F.n)(N),l=(0,d.A)(c,2),m=l[0],g=l[1],p=(g.called,g.loading,(0,F.n)(h)),b=(0,d.A)(p,2),f=b[0],w=b[1],O=(w.called,w.loading,(0,r.useState)(t)),P=(0,d.A)(O,2),A=P[0],j=P[1],k=(0,i.wA)(),C=(0,i.d4)(u.qc)?0===A.id?0:1:2,S=2!==C,q=function(){k((0,s.ck)())},D=function(){var e;return(null==A?void 0:A.price)>0&&(null==A?void 0:A.category)&&(null==A||null===(e=A.brand)||void 0===e?void 0:e.length)>0},J=function(){f({variables:{goodsInput:{id:A.id,category:A.category,brand:A.brand,price:A.price}},refetchQueries:[{query:v},{query:E},{query:y,variables:{category:a}}]}).then((function(e){o.oR.success(function(e){switch(e){case 1:return"상품 정보가 수정되었습니다.";case 0:return"상품이 등록되었습니다."}}(C)),q()})).catch((function(e){o.oR.error(e.message)}))};return r.createElement(r.Fragment,null,r.createElement(R.A,{show:!0,onHide:q,backdrop:"static",centered:!0},r.createElement(R.A.Header,{"data-bs-theme":"dark",closeButton:!0},r.createElement(R.A.Title,null,function(e){switch(e){case 1:return"상품 수정";case 0:return"상품 등록";case 2:return"상품 상세"}}(C))),r.createElement(R.A.Body,null,r.createElement("div",{className:"form"},r.createElement("div",{className:"row"},r.createElement(G.Ay,{isDisabled:!S,value:A.category?{value:A.category,label:A.category}:void 0,placeholder:"카테고리를 선택하세요.",onChange:function(e){return j(_(_({},A),{},{category:e.value}))},options:x.map((function(e){return{value:e,label:e}}))})),r.createElement("div",{className:"row mt-2"},r.createElement("div",{className:"col form-group"},r.createElement("input",{type:"text",name:"brand",value:A.brand,disabled:!S,className:"form-control",placeholder:"브랜드를 입력하세요.",required:!0,onChange:function(e){return j(_(_({},A),{},{brand:e.target.value}))}}))),r.createElement("div",{className:"row mt-2"},r.createElement("div",{className:"col form-group"},r.createElement("input",{type:"number",name:"price",value:A.price,disabled:!S,className:"form-control",placeholder:"가격을 입력하세요.",required:!0,onChange:function(e){return j(_(_({},A),{},{price:e.target.valueAsNumber}))}}))),r.createElement("div",{className:"mt-3 submit"},r.createElement("button",{type:"button",className:"btn btn-dark w-100",disabled:!function(e){switch(e){case 0:return D();case 1:return JSON.stringify(t)!==JSON.stringify(A)&&D();case 2:return!0}}(C),onClick:function(){return function(e){switch(e){case 1:case 0:J();break;case 2:q()}}(C)}},function(e){switch(e){case 1:return"수정";case 0:return"등록";case 2:return"닫기"}}(C))),1===C&&r.createElement("div",{className:"mt-2 submit"},r.createElement("button",{type:"button",className:"btn btn-danger w-100",disabled:!1,onClick:function(){m({variables:{id:A.id},refetchQueries:[{query:v},{query:E},{query:y,variables:{category:a}}]}).then((function(e){o.oR.success("상품이 삭제되었습니다."),q()})).catch((function(e){o.oR.error(e.message)}))}},"삭제"))))))},M=function(){var e=(0,i.wA)(),t=(0,i.d4)(u.qc),n=function(){e((0,s.pN)())},a=function(t){o.oR.success(t?"운영자님 반갑습니다.":"고객님 반갑습니다."),e((0,u.YU)(t)),n()};return r.createElement(r.Fragment,null,r.createElement(R.A,{show:!0,onHide:n,backdrop:"static",centered:!0},r.createElement(R.A.Header,{"data-bs-theme":"dark",closeButton:!0},r.createElement(R.A.Title,null,"사용자 선택")),r.createElement(R.A.Body,null,r.createElement("div",{className:"row px-2"},r.createElement("button",{type:"button",className:"col btn btn-dark user me-1",disabled:!t,onClick:function(){return a(!1)}},r.createElement("i",{className:"bi bi-person user-icon"}),r.createElement("span",{className:"user-title"},"고객")),r.createElement("button",{type:"button",className:"col btn btn-dark user ms-1",disabled:t,onClick:function(){return a(!0)}},r.createElement("i",{className:"bi bi-person-gear user-icon"}),r.createElement("span",{className:"user-title"},"운영자"))))))},Q=function(){var e=(0,i.d4)(s.cz),t=(0,i.d4)(s.nN);return r.createElement(r.Fragment,null,e.show&&r.createElement(z,{goods:e.goods}),t.show&&r.createElement(M,null))};var U=new a.R({uri:"/graphql",cache:new c.D});const Y=function(){return r.createElement(l.X,{client:U},r.createElement(J,null,r.createElement(Q,null),r.createElement(m,null),r.createElement(I,null),r.createElement(o.l$,{position:"top-center",reverseOrder:!1})))}}}]);